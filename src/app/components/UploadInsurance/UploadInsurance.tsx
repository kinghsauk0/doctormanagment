"use client";
import { Button } from "primereact/button";
import { FileUpload } from "primereact/fileupload";
import { Sidebar } from "primereact/sidebar";
import { Toast } from "primereact/toast";
import React, { useRef, useState } from "react";
import InsuranceDetails from "../InsuranceDetails/InsuranceDetails";

type Props = {
  visible: boolean;
  setVisible: React.Dispatch<React.SetStateAction<boolean>>;
};

export default function UploadInsurance({ visible, setVisible }: Props) {
  const UploadInsuranceHeader = (
    <div className="flex align-items-center gap-2">
      <div className="flex gap-4 items-center">
        <Button
          icon="pi pi-arrow-left"
          className="p-0 bg-white border-0 shadow-none text-[#222] w-auto"
          onClick={() => setVisible(false)}
        />
        <div className="font-semibold text-base text-[#222]">
          Upload Insurance
        </div>
      </div>
    </div>
  );

  const toast = useRef(null);

  const onUpload = () => {
    toast.current.show({
      severity: "info",
      summary: "Success",
      detail: "File Uploaded",
    });
  };

  const [insurancedetailsVisible, setInsuranceDetailsVisible] = useState(false);
  return (
    <>
      <Sidebar
        header={UploadInsuranceHeader}
        visible={visible}
        position="right"
        onHide={() => setVisible(false)}
        className="w-full md:w-[500px]"
      >
        <div className="flex flex-col h-full text-center">
          <div className="text-center">
            <svg
              width="46"
              height="45"
              viewBox="0 0 46 45"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2.31906 0.158295C1.46669 0.448505 0.895507 1.04651 0.64946 1.87317C0.456138 2.52394 0.447351 16.8497 0.640673 17.2279C0.948231 17.8083 1.84454 17.8083 2.1521 17.2279C2.25755 17.0168 2.27512 15.8296 2.27512 9.71761C2.27512 1.8292 2.25755 2.09302 2.75843 1.86437C2.93418 1.78522 5.50009 1.75884 13.3472 1.75884H23.7075L23.7339 4.72249C23.7603 7.58941 23.769 7.70373 23.9536 8.0555C24.2523 8.60954 24.5335 8.90854 25.052 9.18995L25.5177 9.45378L28.4879 9.48016L31.4492 9.50655V15.2843V21.0621L28.3473 22.0207C24.3842 23.2519 24.3578 23.2607 24.1996 23.5685C24.1293 23.7092 24.0678 23.8851 24.0678 23.9642C24.0678 24.0786 23.1627 24.0961 15.3244 24.0961C8.74263 24.0961 6.52821 24.1225 6.36125 24.2017C6.10642 24.316 5.87795 24.6854 5.87795 24.9756C5.87795 25.2658 6.10642 25.6351 6.36125 25.7495C6.52821 25.8286 8.74263 25.855 15.3244 25.855H24.0678V27.438V29.0209H15.3244C8.74263 29.0209 6.52821 29.0473 6.36125 29.1264C6.10642 29.2408 5.87795 29.6101 5.87795 29.9003C5.87795 30.1905 6.10642 30.5599 6.36125 30.6742C6.52821 30.7534 8.73385 30.7798 15.3156 30.7798H24.0415L24.0942 32.3363C24.1469 34.06 24.3139 35.0625 24.762 36.3905C25.0432 37.2435 25.7286 38.6594 26.168 39.3101L26.4404 39.7059L14.7268 39.7323C6.0537 39.7499 2.96054 39.7235 2.77601 39.6531C2.25755 39.4333 2.27512 39.7235 2.27512 31.7911C2.27512 23.9027 2.2927 24.1665 1.79182 23.9379C1.32609 23.7268 0.790058 23.9027 0.614311 24.3336C0.544012 24.5183 0.51765 26.5234 0.535224 32.0549C0.561586 39.4421 0.561586 39.5388 0.746121 39.9345C1.01853 40.515 1.43154 40.9371 1.99393 41.2185L2.49481 41.4647L15.2189 41.4911L27.943 41.5087L28.5757 42.0627C30.1311 43.4258 32.1873 44.4723 34.103 44.8945C34.7445 45.0352 34.8323 45.0352 35.465 44.8945C36.915 44.5779 38.5933 43.8304 39.973 42.8806C40.9396 42.221 42.5564 40.5765 43.2155 39.574C44.2524 38.0174 44.8851 36.5312 45.263 34.7459C45.4387 33.9633 45.4475 33.5499 45.4826 28.8978C45.5266 23.5245 45.5178 23.4981 45.0784 23.2695C44.7797 23.1112 34.9905 20.0508 34.7972 20.0508C34.7181 20.0508 34.3403 20.1475 33.9536 20.2707C33.567 20.3938 33.2418 20.4905 33.233 20.4905C33.2155 20.4905 33.2067 17.7643 33.2067 14.4401V8.38089L32.9519 8.03791C32.6531 7.63338 25.3508 0.351768 25.0344 0.140705C24.8411 0.00879288 23.8569 0 13.7866 0C3.54929 0.00879288 2.72328 0.0175896 2.31906 0.158295ZM27.8464 5.40844L30.175 7.73891H28.0836H25.9835L25.7286 7.48388L25.4738 7.22884V5.15341C25.4738 4.01016 25.4826 3.07798 25.5002 3.07798C25.5089 3.07798 26.5634 4.12449 27.8464 5.40844ZM39.3403 23.2783L43.7603 24.659L43.7252 29.232C43.69 34.2007 43.6812 34.2535 43.1364 35.8716C42.2313 38.5802 40.0872 41.0162 37.4686 42.3266C36.5986 42.7575 35.2541 43.1972 34.7884 43.1972C33.9272 43.1884 31.625 42.2034 30.4387 41.3152C28.6197 39.9609 27.1082 37.8943 26.4053 35.7749C25.8956 34.2359 25.8868 34.1743 25.8517 29.232L25.8165 24.659L30.1926 23.2871C32.6004 22.5308 34.6478 21.9064 34.7445 21.8976C34.8411 21.8976 36.9062 22.5132 39.3403 23.2783Z"
                fill="#3E7F61"
              />
              <path
                d="M31.2805 24.7812C28.4334 25.6782 27.9765 25.8453 27.7832 26.0651L27.5723 26.3202L27.6074 29.9785C27.6426 33.9623 27.6514 34.0503 28.1962 35.5541C29.1364 38.1308 31.4036 40.3293 34.031 41.2088C34.6813 41.4286 34.7691 41.4374 35.1733 41.3319C35.7885 41.1824 37.1329 40.5404 37.8623 40.0567C39.4352 39.0102 40.7973 37.225 41.4475 35.3518C41.9308 33.9711 41.9923 33.3028 41.9923 29.618V26.2938L41.7551 26.0387C41.5442 25.8189 41.0609 25.643 38.2314 24.7636C36.4299 24.2008 34.8746 23.7435 34.7603 23.7522C34.6549 23.7522 33.0907 24.2183 31.2805 24.7812ZM37.5987 26.4081L40.1909 27.226L40.2173 29.9873C40.2437 33.0653 40.1646 33.804 39.7164 34.9649C39.1365 36.4599 38.082 37.779 36.7726 38.6496C36.0257 39.1333 35.0943 39.573 34.7867 39.573C34.4791 39.573 33.5477 39.1333 32.8008 38.6409C31.4826 37.7702 30.3403 36.328 29.8043 34.8593C29.4 33.7425 29.3297 32.9862 29.3561 29.9873L29.3825 27.226L31.9747 26.4169C33.3983 25.9684 34.6637 25.599 34.7867 25.599C34.9097 25.599 36.1751 25.9596 37.5987 26.4081Z"
                fill="#3E7F61"
              />
              <path
                d="M35.6069 31.3285L33.9985 32.929L33.2251 32.1727C32.3198 31.2669 32.0913 31.1526 31.6342 31.3724C31.2299 31.5747 31.0542 31.8913 31.1333 32.287C31.1772 32.5333 31.4321 32.8411 32.3989 33.7996C34.1303 35.5057 33.8139 35.5761 36.4155 32.9818L38.437 30.9591V30.5546C38.437 30.0269 38.1294 29.7279 37.5844 29.7279C37.2241 29.7279 37.1713 29.7719 35.6069 31.3285Z"
                fill="#3E7F61"
              />
              <path
                d="M14.7607 8.74073C14.3653 8.96058 14.3213 9.18044 14.3126 10.7018V12.1353H12.9066C11.36 12.1353 11.0964 12.1969 10.9031 12.619C10.7537 12.9356 10.7537 17.3151 10.9031 17.6317C11.0964 18.0538 11.36 18.1154 12.9066 18.1154H14.3126V19.5224C14.3126 21.0526 14.3741 21.3077 14.7607 21.5099C15.121 21.6946 19.4795 21.6946 19.8398 21.5099C20.2265 21.3077 20.288 21.0526 20.288 19.5224V18.1154H21.6939C23.2405 18.1154 23.5041 18.0538 23.6975 17.6317C23.8644 17.2799 23.8469 12.9092 23.6799 12.5838C23.4778 12.1969 23.223 12.1353 21.6939 12.1353H20.288V10.7282C20.288 9.19803 20.2265 8.943 19.8398 8.74073C19.4971 8.56485 15.0771 8.56485 14.7607 8.74073ZM18.5305 11.7835C18.5305 13.8941 18.5305 13.8941 20.6395 13.8941H22.0454V15.1253V16.3565H20.6395C18.5305 16.3565 18.5305 16.3565 18.5305 18.4671V19.8742H17.3003H16.07V18.4671C16.07 16.3565 16.07 16.3565 13.9611 16.3565H12.5551V15.1253V13.8941H13.9611C16.07 13.8941 16.07 13.8941 16.07 11.7835V10.3765H17.3003H18.5305V11.7835Z"
                fill="#3E7F61"
              />
              <path
                d="M0.963852 19.9951C0.199204 20.417 0.524399 21.6299 1.39452 21.6299C1.84276 21.6299 2.27342 21.1992 2.27342 20.7598C2.27342 20.1006 1.54393 19.6699 0.963852 19.9951Z"
                fill="#3E7F61"
              />
              <path
                d="M6.34584 34.0696C5.75708 34.3948 5.77466 35.3264 6.38099 35.5989C6.70612 35.7483 17.3916 35.7483 17.7167 35.5989C17.9715 35.4846 18.2 35.1155 18.2 34.8254C18.2 34.5354 17.9715 34.1663 17.7167 34.052C17.3652 33.8938 6.63582 33.9114 6.34584 34.0696Z"
                fill="#3E7F61"
              />
            </svg>
          </div>
          <div className="my-3 text-lg text-[#15192C] font-semibold">
            Lets add Your Insurance Details
          </div>
          <div className="text-sm text-[#797979]">
            Dont worry, well make it quick. <br />
            just take a photo of your card
          </div>
          <div className="py-20 border-2 border-dashed border-[#848484] rounded-lg text-center my-10">
            <Toast ref={toast}></Toast>
            <FileUpload
              className="insuupload"
              mode="basic"
              chooseLabel="Upload"
              name="demo[]"
              url="/api/upload"
              accept="image/*"
              maxFileSize={1000000}
              onUpload={onUpload}
            />
          </div>
          <div className="text-center mb-3">
            <Button
              className="p-0 bg-white border-0 shadow-none text-[#0D52AF]"
              label="Enter Insurance Details"
              onClick={() => {
                setVisible(false);
                setInsuranceDetailsVisible(true);
              }}
            />
          </div>
          <div className="text-center">
            <Button
              className="p-0 bg-white border-0 shadow-none text-[#0D52AF]"
              label="Sign up without Insurance"
            />
          </div>
          <div className="mt-auto">
            <Button
              className="bg-[#0D52AF] text-[#fff] text-sm border-[#0D52AF] w-full"
              label="Continue"
              onClick={() => {
                setVisible(false);
                setInsuranceDetailsVisible(true);
              }}
            />
          </div>
        </div>
      </Sidebar>
      <InsuranceDetails
        visible={insurancedetailsVisible}
        setVisible={setInsuranceDetailsVisible}
      />
    </>
  );
}
